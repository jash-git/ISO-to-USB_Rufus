(function(){var c=function(b,a){this.$div=$(b);this._options=a};c.prototype.render=function(){var b=this.$div.addClass("photo-rotator").html('<p class="photo-rotator-image" ><a href="#" ><img /></a></p>\n<p class="photo-rotator-title" ><a href="#" ></a></p>'),a=b.children(".photo-rotator-image"),f=a.children(),c=f.children(),l=b.find(".photo-rotator-title a"),g=f.add(l),b=this._options,m=4/3,h=a.width(),d=h*m;a.height(d);a.css("lineHeight",d+"px");g.hide();$.getJSON("//photo.xuite.net/_feed/photo?user_id="+
b.userID+"&album_id="+b.albumID+"&count=2000&callback=?",function(b){var a=b.photos,o=a.length,e=0;(function p(){e===o&&(e=0);var b=a[e],n=new Image;n.onload=function(){var a=this.width,i=this.height,j,k;i/a>m?(k=d,j=a*d/i):(j=h,k=i*h/a);c.width(j).height(k).attr("src",this.src);a=b.link;f.attr("href",a);l.attr("href",a).html(b.title);g.fadeIn().promise().done(function(){++e;setTimeout(function(){g.fadeOut().promise().done(function(){p()})},3E3)})};n.src=b.media.m})()})};XUI.Widgets.PhotoRotator=c})();
